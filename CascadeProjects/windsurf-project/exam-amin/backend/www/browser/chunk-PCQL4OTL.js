import{a as F,b as H,e as M}from"./chunk-TY5GDDUA.js";import{Ba as _,Cb as D,Fa as b,Ma as u,Na as v,Oa as C,P,Pa as O,Qa as y,Ra as o,S as f,Sa as n,Ta as S,Xa as I,Y as g,Ya as $,Z as x,Za as p,a as c,b as m,bb as r,c as h,cb as l,db as E,fb as L,gb as T,pb as w,ta as s,vb as U,wb as j,xb as k}from"./chunk-GROMQMYD.js";var d,V=h(()=>{"use strict";M();w();M();d=class i{constructor(t){this.http=t}apiUrl="http://localhost:3000/api";httpOptions={headers:new F({"Content-Type":"application/json"})};getPosts(){return this.http.get(`${this.apiUrl}/posts`)}getPost(t){return this.http.get(`${this.apiUrl}/posts/${t}`)}createPost(t){return this.http.post(`${this.apiUrl}/posts`,t,this.httpOptions)}updatePost(t,e){return this.http.put(`${this.apiUrl}/posts/${t}`,e,this.httpOptions)}deletePost(t){return this.http.delete(`${this.apiUrl}/posts/${t}`)}getPostsByAuthor(t){return this.http.get(`${this.apiUrl}/posts?author=${encodeURIComponent(t)}`)}static \u0275fac=function(e){return new(e||i)(f(H))};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}});function q(i,t){i&1&&(o(0,"div",1)(1,"div",3)(2,"span",4),r(3,"Chargement..."),n()()())}function G(i,t){if(i&1&&(o(0,"div",2),r(1),n()),i&2){let e=p();s(),l(e.error)}}function J(i,t){if(i&1&&(o(0,"div",9)(1,"p",10),r(2),n(),o(3,"div",11)(4,"span"),r(5),n(),o(6,"span",12),r(7,"\u2022"),n(),o(8,"span",12),r(9),L(10,"date"),n()()()),i&2){let e=p().$implicit;s(2),l(e.contenu),s(3),E("Par ",e.auteur),s(4),l(T(10,3,e.date,"dd/MM/yyyy"))}}function K(i,t){if(i&1){let e=I();o(0,"div",5)(1,"div",6),$("click",function(){let B=g(e).$index,R=p(2);return x(R.togglePost(B))}),o(2,"h5",7),r(3),n(),S(4,"i",8),n(),u(5,J,11,6,"div",9),n()}if(i&2){let e=t.$implicit;s(3),l(e.titre),s(),y("ngClass",e.isOpen?"bi-chevron-up":"bi-chevron-down"),s(),v(e.isOpen?5:-1)}}function Q(i,t){if(i&1&&C(0,K,6,3,"div",5,A),i&2){let e=p();O(e.posts)}}var A,N,X=h(()=>{D();w();V();D();A=(i,t)=>t.id;N=class i{constructor(t){this.postService=t}posts=[];error=null;loading=!0;ngOnInit(){this.loadPosts()}loadPosts(){this.loading=!0,this.error=null,this.postService.getPosts().subscribe({next:t=>{this.posts=t.map((e,a)=>m(c({},e),{isOpen:a===0})),this.loading=!1},error:t=>{console.error("Erreur lors du chargement des posts :",t),this.error="Impossible de charger les articles. Veuillez r\xE9essayer plus tard.",this.loading=!1}})}togglePost(t){this.posts=this.posts.map((e,a)=>m(c({},e),{isOpen:a===t?!e.isOpen:!1}))}static \u0275fac=function(e){return new(e||i)(_(d))};static \u0275cmp=b({type:i,selectors:[["app-post-list"]],decls:4,vars:1,consts:[[1,"list-group"],[1,"text-center","my-4"],[1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"list-group-item","p-0","mb-2","border","rounded"],[1,"p-3","d-flex","justify-content-between","align-items-center",2,"cursor","pointer",3,"click"],[1,"mb-0"],[1,"bi",3,"ngClass"],[1,"p-3","border-top"],[1,"mb-2"],[1,"text-muted","small"],[1,"ms-2"]],template:function(e,a){e&1&&(o(0,"div",0),u(1,q,4,0,"div",1)(2,G,2,1,"div",2)(3,Q,2,0),n()),e&2&&(s(),v(a.loading?1:a.error?2:3))},dependencies:[k,U,j],encapsulation:2})}});X();export{N as PostList};
